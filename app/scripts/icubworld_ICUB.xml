
<application>
<name>iCub World Acquisition</name>

        <dependencies>
                <port>/icub/camcalib/left/out</port>
                <port>/SFM/disp:o</port>
        </dependencies>

        <!-- Modules -->
        
        <module>
                <name>motionCUT</name>
                <parameters>--name motionCUT/left --coverXratio 0.7 --coverYratio 0.7 --framesPersistence 2 --numThreads 5 --nodesStep 6</parameters>
                <node>icub12</node>
                <tag>motionCUTLeft</tag>
        </module>
	
		<module>
                <name>nearBlobber</name>
                <parameters>--imW 640 --imH 480 --bufferSize 3 --minBlobSize 1600 </parameters>
                <node>icub12</node>
                <tag>nearBlobber</tag>
        </module>
        
		<module>
                <name>actionsRenderingEngine</name>
                <parameters>--motor::eyes_traj_time 2.0 --motor::neck_traj_time 3.5 --motor::block_eyes 0.0</parameters>
                <node>icub16</node>
                <tag>actionsRenderingEngine</tag>
        </module>
		
		<module>
                <name>iCubWorldManager</name>  
				<parameters>--observe_time_baseline 10 --single_operator_time 5 --use_disp_roi --acquire_also_right </parameters>
                <node>icub12</node>
                <tag>iCubWorldManager</tag>
        </module>

        <module>
                <name>yarpview</name>
                <parameters>--name /opt/nearBlobber</parameters>
                <node>icub12</node>
                <tag>viewer_blobber</tag>
        </module>

        <module>
                <name>yarpview</name>
                <parameters>--name /show/iCubWorldManager</parameters>
                <node>icub12</node>
                <tag>viewer_box</tag>
        </module>

        <module>
                <name>yarpview</name>
                <parameters>--name /show/right/iCubWorldManager</parameters>
                <node>icub12</node>
                <tag>viewer_box_right</tag>
        </module>
		
        <!-- Connections -->


        <!-- motionCUT -->
        <connection>
                <from>/icub/camcalib/left/out</from>
                <to>/motionCUT/left/img:i</to>
                <protocol>mcast</protocol>
        </connection> 
        
        <!-- nearBlobber input -->
        <connection>
                <from external="true">/SFM/disp:o</from>
                <to external="true">/nearBlobber/img:i</to>
                <protocol>udp</protocol>
        </connection> 

        <connection>
                <from external="true">/nearBlobber/sfm/rpc</from>
                <to external="true">/SFM/rpc</to>
                <protocol>tcp</protocol>
        </connection> 

        <!-- iCubWorldManager input -->

        <connection>
                <from>/icub/camcalib/left/out</from>
                <to>/iCubWorldManager/img:i</to>
                <protocol>mcast</protocol>
        </connection>

        <connection>
                <from>/icub/camcalib/right/out</from>
                <to>/iCubWorldManager/img/right:i</to>
                <protocol>mcast</protocol>
        </connection>
        
        <connection>
                <from>/nearBlobber/blobs:o</from>
                <to>/iCubWorldManager/blobs:i</to>
                <protocol>mcast</protocol>
        </connection>

         <connection>
                <from>/nearBlobber/blobs/right:o</from>
                <to>/iCubWorldManager/blobs/right:i</to>
                <protocol>mcast</protocol>
        </connection>

        <connection>
                <from>/nearBlobber/roi:o</from>
                <to>/iCubWorldManager/roi:i</to>
                <protocol>mcast</protocol>
        </connection>

         <connection>
                <from>/nearBlobber/roi/right:o</from>
                <to>/iCubWorldManager/roi/right:i</to>
                <protocol>mcast</protocol>
        </connection>

        <connection>
                <from>/motionCUT/left/blobs:o</from>
                <to>/iCubWorldManager/blobs:i</to>
                <protocol>mcast</protocol>
        </connection>

        <!-- ActionsRenderingEngine -->
        <connection>
                <from>/motionCUT/left/blobs:o</from>
                <to>/actionsRenderingEngine/left/blobs:i</to>
                <protocol>udp</protocol>
        </connection>

        <connection>
                <from>/nearBlobber/blobs:o</from>
                <to>/actionsRenderingEngine/left/blobs:i</to>
                <protocol>udp</protocol>
        </connection>

        <connection>
                <from>/nearBlobber/:o</from>
                <to>/actionsRenderingEngine/left/blobs:i</to>
                <protocol>udp</protocol>
        </connection>
		
        <connection>
                <from>/iCubWorldManager/are/rpc</from>
                <to>/actionsRenderingEngine/rpc</to>
                <protocol>tcp</protocol>
        </connection>
        
        <connection>
                <from>/iCubWorldManager/are/hand:io</from>
                <to>/actionsRenderingEngine/get:io</to>
                <protocol>tcp</protocol>
        </connection>

        <connection>
                <from>/iCubWorldManager/are/get:io</from>
                <to>/actionsRenderingEngine/get:io</to>
                <protocol>tcp</protocol>
        </connection>

        <connection>
                <from>/iCubWorldManager/are/cmd:io</from>
                <to>/actionsRenderingEngine/cmd:io</to>
                <protocol>tcp</protocol>
        </connection>

        <!-- Visualization -->
		
        <connection>
                <from>/iCubWorldManager/show:o</from>
                <to>/show/iCubWorldManager</to>
                <protocol>mcast</protocol>
        </connection>

        <connection>
                <from>/iCubWorldManager/show/right:o</from>
                <to>/show/right/iCubWorldManager</to>
                <protocol>mcast</protocol>
        </connection>

         <connection>
                <from>/nearBlobber/opt:o</from>
                <to>/opt/nearBlobber</to>
                <protocol>mcast</protocol>
        </connection>
        
        
</application>
